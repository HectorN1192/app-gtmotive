import{a as le,c as pe,d as ue,g as fe}from"./chunk-2JQXZL7D.js";import{b as de}from"./chunk-IRX2M37W.js";import{E as ce,G as ae,h as re,x as se}from"./chunk-7ASURKHN.js";import{$b as Y,Ba as q,Ca as G,Db as D,Ec as f,Fc as _,Ga as C,Gc as N,Ia as M,Jb as T,Ob as P,S as U,Tb as g,Tc as ie,Ub as d,Vb as E,Zb as X,a as i,ac as I,b,da as B,f as z,g as H,ga as O,k as F,ka as K,kb as y,lc as j,nc as Z,oc as R,pc as ee,qa as a,qc as te,rb as S,sb as J,tc as ne,uc as oe,v as $,yb as Q,za as w}from"./chunk-SB5N7RWA.js";function me(t){let e=_(()=>t());return Ce(e)?new Proxy(t,{get(n,o){return o in e?(S(n[o])||Object.defineProperty(n,o,{value:f(()=>n()[o]),configurable:!0}),me(n[o])):n[o]}}):t}var ve=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function Ce(t){if(t===null||typeof t!="object"||Ie(t))return!1;let e=Object.getPrototypeOf(t);if(e===Object.prototype)return!0;for(;e&&e!==Object.prototype;){if(ve.includes(e.constructor))return!1;e=Object.getPrototypeOf(e)}return e===Object.prototype}function Ie(t){return typeof t?.[Symbol.iterator]=="function"}var ke=new WeakMap,c=Symbol("STATE_SOURCE");function x(t,...e){t[c].update(n=>e.reduce((o,r)=>i(i({},o),typeof r=="function"?r(o):r),n)),De(t)}function Oe(t){return t[c]()}function we(t){return ke.get(t[c])||[]}function De(t){let e=we(t);for(let n of e){let o=_(()=>Oe(t));n(o)}}function ye(...t){let e=[...t],n=typeof e[0]=="function"?{}:e.shift(),o=e;return(()=>{class s{constructor(){let p=o.reduce((v,_e)=>_e(v),Te()),{stateSignals:u,props:h,methods:m,hooks:k}=p,L=i(i(i({},u),h),m);this[c]=p[c];for(let v in L)this[v]=L[v];let{onInit:V,onDestroy:W}=k;V&&V(),W&&a(M).onDestroy(W)}static \u0275fac=function(u){return new(u||s)};static \u0275prov=K({token:s,factory:s.\u0275fac,providedIn:n.providedIn||null})}return s})()}function Te(){return{[c]:J({}),stateSignals:{},props:{},methods:{},hooks:{}}}function Pe(t){return e=>{let n=t(i(i(i({[c]:e[c]},e.stateSignals),e.props),e.methods));return Object.keys(n),b(i({},e),{props:i(i({},e.props),n)})}}function ge(t){return Pe(t)}function he(t){return e=>{let n=t(i(i(i({[c]:e[c]},e.stateSignals),e.props),e.methods));return Object.keys(n),b(i({},e),{methods:i(i({},e.methods),n)})}}function be(t){return e=>{let n=typeof t=="function"?t():t,o=Object.keys(n);e[c].update(s=>i(i({},s),n));let r=o.reduce((s,l)=>{let p=f(()=>e[c]()[l]);return b(i({},s),{[l]:me(p)})},{});return b(i({},e),{stateSignals:i(i({},e.stateSignals),r)})}}function A(t,e){e?.injector||w(A);let n=e?.injector??a(C),o=new F,r=t(o).subscribe();n.get(M).onDestroy(()=>r.unsubscribe());let s=(l,p)=>{if(Ee(l))return o.next(l),{destroy:z};let u=p?.injector??Re()??n;if(S(l)){let m=N(()=>{let k=l();_(()=>o.next(k))},{injector:u});return r.add({unsubscribe:()=>m.destroy()}),m}let h=l.subscribe(m=>o.next(m));return r.add(h),u!==n&&u.get(M).onDestroy(()=>h.unsubscribe()),{destroy:()=>h.unsubscribe()}};return s.destroy=r.unsubscribe.bind(r),s}function Ee(t){return!S(t)&&!$(t)}function Re(){try{return a(C)}catch{return null}}var Me={vehiclesModel:[],isLoading:!1},Se=ye({providedIn:"root"},be(Me),ge(t=>({modelsTable:f(()=>t.vehiclesModel().map(e=>({modelId:e.Model_ID,modelName:e.Model_Name})))})),he((t,e=a(le))=>({loadModels:A(H(O(()=>x(t,{isLoading:!0})),B(n=>e.getModelsForMakeId(n).pipe(O(o=>{x(t,{vehiclesModel:o.Results,isLoading:!1})}),U(()=>x(t,{isLoading:!1})))))),clearModels:()=>x(t,i({},Me))})));function Ne(t,e){if(t&1){let n=X();g(0,"div",0)(1,"mat-icon",2),Y("click",function(){q(n);let r=I();return G(r.goToHome())}),j(2,"arrow_back"),d(),g(3,"span",3),j(4),d()()}if(t&2){let n=I();y(4),Z(" ",n.dataTitle(),"")}}function Ae(t,e){if(t&1&&(g(0,"section",4)(1,"p",5),j(2,"Tipos de vehiculos"),d(),E(3,"app-table",6),d(),g(4,"section",4)(5,"p",5),j(6,"Modelos de la marca"),d(),E(7,"app-table",6),d()),t&2){let n=I(),o=te(0);y(3),T("data",o)("displayedColumns",n.displayedColumnsType),y(4),T("data",n.signalStore.modelsTable())("displayedColumns",n.displayedColumnsModel)}}var je=class t{id;_router=a(re);_store=a(se);signalStore=a(Se);dataTitle=f(()=>{let e=this.signalStore.vehiclesModel().at(0);return e?`${e?.Make_ID} - ${e?.Make_Name}`:""});displayedColumnsModel=[{key:"modelId",label:"Id Modelo"},{key:"modelName",label:"Nombre modelo"}];displayedColumnsType=[{key:"typeId",label:"Id Tipo"},{key:"typeName",label:"Nombre Tipo vehiculo"}];dataType$=this._store.select(de);ngOnInit(){this.signalStore.loadModels(this.id),this._store.dispatch(ce({id:this.id}))}goToHome(){this._router.navigate(["/"])}ngOnDestroy(){this.signalStore.clearModels(),this._store.dispatch(ae())}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Q({type:t,selectors:[["app-make-detail"]],inputs:{id:"id"},decls:6,vars:5,consts:[[1,"title"],[1,"content"],[3,"click"],[1,"title__data"],[1,"content-table"],[1,"content-table__title"],[3,"data","displayedColumns"]],template:function(n,o){if(n&1&&(R(0),ne(1,"async"),R(2),D(3,Ne,5,1,"div",0),g(4,"section",1),D(5,Ae,8,4),d()),n&2){let r=ee(oe(1,2,o.dataType$)),s=o.signalStore.modelsTable();y(3),P(o.dataTitle()?3:-1),y(2),P(r&&s?5:-1)}},dependencies:[ie,fe,ue,pe],styles:[".title[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:row;align-items:center;column-gap:10px}.title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}.content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;flex-direction:row;gap:20px;padding:20px}.content-table[_ngcontent-%COMP%]{background-color:#fff;padding:20px;height:fit-content}.content-table__title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:20px}@media (max-width: 768px){.content[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{je as MakeDetailComponent};
